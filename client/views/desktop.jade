title Qwile - OS that changes your life
link(rel='stylesheet', type='text/css', href='css/lib/bootstrap.buttons.min.css')
link(rel='stylesheet', type='text/css', href='css/lib/bootstrap.glyphicons.min.css')
link(rel='stylesheet', type='text/css', href='css/lib/resizable.css')
link(rel='stylesheet', type='text/css', href='css/lib/tipped.css')
link(rel='stylesheet', type='text/css', href='css/lib/slick.css')
link(rel='stylesheet', type='text/css', href='css/lib/slick-theme.css')
link(rel='stylesheet', type='text/css', href='css/desktop.css')
script(src='js/desktop.js')

// ********************** SYSTEM BLOCKS *******************
#shadow
	.inner-shadow
		.dialog-content
			img.dialog-icon(src='img/exclaim.png')
			.dialog-close(title='Close')
			.dialog-text
				| Are you sure you want to sign out?
			.buttons(align='right')
				button.btn.btn-sm.btn-warning.exit Sign out
				button.btn.btn-sm.btn-primary.cancel Cancel
// //////////// SYSTEM BLOCKS END /////////////////////////
.wrapper
	#toppanel
		table
			tr
				td
					#start(title='Click here to open menu')
				td#search-td
					div(align='center')
						form.search
							input.search(type='text', placeholder='Start typing to search...')
							.button(title='Start search')
				td#announce
					div
					span.new 3
				td#email
					span #{user.email}
				td#photo
					div
				td(width='42')
					#settings
				td(width='42')
					#quit
	// **************** LEFT PANEL START ******************
	aside#leftpanel
		table
			tr(height='20%', title='Mute')
				td.bordered(align='center')
					.sound(class='<!--disabled-->')
			tr(height='20%', title='Make me invisible to others')
				td.bordered(align='center')
					.visible
			tr(height='20%', title='Widget customization')
				td.bordered(align='center', width='100%')
					.add-widget
				td(width='4', align='center')
					img.lock(src='img/panellock.png')
			tr(height='20%', title='Drop item here to put it in menu')
				td.bordered(align='center')
					.to-start
			tr(height='20%', title='Drop item here to delete it')
				td(align='center')
					.to-bin
	// //////////////// LEFT PANEL END ///////////////
	// **************** USER START ******************
	aside#profile
		table(cellspacing='0', cellpadding='0')
			tr
				td.header
					| Profile
			tr.area.open
				td.photo
					img.profile-photo(title="Click on the image to change your profile photo!", src="/user/getPhoto")
					form#upload-photo(action="/user/uploadPhoto", enctype="multipart/form-data" ref="uploadForm" method="post" style="display: none;")
						input#profile-photo-uploader(type="file", name="uploadedFile")
			tr
				td.header
					| Info
			tr.area
				td.info
					.profile-personal-row
						span.name Firstname:
						span.value #{user.firstname || "unknown"}
					.profile-personal-row
						span.name Lastname:
						span.value #{user.lastname || "unknown"}
					.profile-personal-row
						span.name Middlename:
						span.value #{user.middlename || "unknown"}
					.profile-personal-row
						span.name Age:
						span.value #{user.age || "unknown"}
					.profile-personal-row
						span.name Gender:
						span.value #{user.gender || "unknown"}
			tr
				td.header
					| Link
			tr.area
				td.link
					.profile-link-row
						span.name Mobile:
						span.value +7 (915) 272-17-15
					.profile-link-row
						span.name Jabber:
						span.value 390-291-581
					.profile-link-row
						span.name Skype:
						span.value maxim.kuryazov
					.profile-link-row
						span.name Email:
						span.value #{user.email}
			tr
				td.header
					| Adress
			tr.area
				td.adress
					.profile-adress-row
						span.name Country:
						span.value Russian Federation
					.profile-adress-row
						span.name City:
						span.value Moscow
					.profile-adress-row
						span.name Street:
						span.value Sumskaya
					.profile-adress-row
						span.name House
						span.value 6/5
			tr
				td.header
					| Interests
			tr.area
				td.iterests
					.profile-interest-row
						span.name Occupation:
						span.value Programming
					.profile-interest-row
						span.name Company:
						span.value Qwile Incorporated
					.profile-interest-row
						span.name Position:
						span.value Lead programmer
					.profile-interest-row
						span.name Hobbie:
						span.value Chess, Swimming
	// //////////////// USER END ///////////////
	// **************** NOTIFICATION START ******************
	script#popup-view(type="text/template")
		.desktop-notification
			.top
				.close(title='close')
			.content
				img(src!='img/<%= picture %>')
				.text
					h9 <%= title %>
					span.message
						| <%= message %>
	// //////////////// NOTIFICATION END ///////////////
	// **************** WINDOW START *******************
	script#default-app-view-template(type='text/template')
		.window(data-app-name!='<%= name %>', id!="<%= id %>")
			.top
				table
					tr
						td.icon
							img(src!='img/<%= icon %>', alt='App icon')
						td.title(title="Double click to use a fullscreen mode.")
							span <%= name %>
						td.buttons
							.close(title='Close')
							.fullscreen(title='Full screen')
							.hidedown(title='Hide')
			.content
				.inside
					<% if (scroll) { %>
					.scroll
						.slider
					<% } %>
					.window-block
					<% if (iframe) { %>
					<% var appURL = native ? "/app/render?id=" + id : url; %>
					iframe(src!="<%= appURL %>", frameborder="0", allowfullscreen="true", marginheight="0", marginwidth="0", height="100%", width="100%")
					<% } else { %>
					// ajax
					<% } %>
	// //////////////// WINDOW END ///////////////////
	// ***************** WIDGET START ****************
	script#widget-view(type='text/template')
		.buttons
			.close(title='Close')
			.resize(title='Scale')
			.settings(title='Customize')
		content
	// //////////////// WIDGET END ///////////////////
	// ***************** MENU START *******************
	#menu
		table.menu-table
			tr
				td.left-part
					table(width='100%', cellspacing='20')
						tr.dropables(align='center')
							td
								.button_back
							td
								.to_home
							td
								.to_bin
							td
								.button_forward
						tr
							td.apps-td(colspan='4')
						tr.pager(align='center')
							td(colspan='4')
								ul.pagination
									li.active
									li
									li
									li
									li
				td.right-part
					form.search
						table
							tr
								td
									input(type='text', placeholder='Type the name of application here...')
								td(align='right', width='50')
									.button
					.placeholder(align='center') There are no results on your request.
					ul#apps-list
	// //////////////// MENU END ///////////////////
	// ************** WIDGET SELECT START ***************
	#widget_select
		#widget_select_inside
			.widgets_list.regular.slider(align='center')
				each widget in widgets
					.block(data-id!="#{widget._id}")
						.img(data-name!="#{widget.name}", data-id!="#{widget._id}", style!="background-image:url(#{widget.image})", title="Click to add this widget on Desktop.")
							if widget.added
								.mark
						.title= widget.title
	// ///////////// WIDGET SELECT END ///////////////////
	.footer-push
// ***************** LOGO LOAD START *************
table.logo
	tr
		td
			img#logo-mono(src='img/logo-mono.png', alt='logo')
			#logo-stereo
			#digits Loading
			img#untitled(src='img/title.png')
// ///////////// LOGO LOAD END ///////////////////
footer
	script#task-view(type='text/template')
		.task(data-app-name!="<%= name %>")
			img.icon(src!='img/<%= icon %>')
			span.title <%= name %>
			.close